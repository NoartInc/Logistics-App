var E=Object.defineProperty,T=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var F=(r,t,l)=>t in r?E(r,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[t]=l,h=(r,t)=>{for(var l in t||(t={}))G.call(t,l)&&F(r,l,t[l]);if(M)for(var l of M(t))W.call(t,l)&&F(r,l,t[l]);return r},g=(r,t)=>T(r,z(t));import{b as k,c as j,d as x,a as e,j as s,F as w}from"./vendor.057b80fe.js";import{e as O,u as U,c as _,r as V,d as $}from"./customer-action.358be791.js";import{S as q}from"./react-select.esm.ee56aae7.js";import{r as J}from"./user-action.686f2f03.js";import{r as N,S as K,a as Q,b as X,B as H,P as S,C as Y,c as Z,d as ee,e as se}from"./Icons.cdb9d418.js";import{c as ae}from"./index.f71ab816.js";import{R as I,u as L}from"./constants.091680d7.js";import"./http-common.c2a35339.js";import"./setPrototypeOf.08579ea5.js";const A=({onChange:r=null,value:t=null})=>{const l=k(),i=j(o=>o.users.list).filter(o=>(o==null?void 0:o.role)==="sales").map(o=>({value:o.id,label:o.fullName})),a=o=>{r({target:{name:"sales",value:o.value}})};return x.exports.useEffect(()=>{l(J())},[]),e(q,{onChange:a,type:"text",id:"sales",name:"sales",className:"mt-1 block w-full border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm",placeholder:"Choose a sales",options:i,isClearable:!0})};function te({id:r=null}){const t=k(),[l,i]=x.exports.useState(!1),[a,o]=x.exports.useState({}),u=j(m=>m.customers.selectedData);x.exports.useEffect(()=>{o(u)},[u]);const d=m=>{t(O(m)),i(!0)},n=m=>{const{name:f,value:v}=m.target;o(y=>g(h({},y),{[f]:v}))};return s(w,{children:[e("svg",{type:"button",onClick:()=>d(r),xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-blue-400 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),l?e(w,{children:s("form",{onSubmit:m=>{m.preventDefault(),t(U(a)),i(!1)},children:[e("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:e("div",{className:"relative w-auto my-6 mx-auto max-w-4xl",children:s("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[s("div",{className:"flex items-start justify-between p-4 border-b border-solid border-slate-200 rounded-t",children:[e("h3",{className:"text-xl font-semibold uppercase",children:"Edit Customer"}),e("button",{className:"p-1 ml-auto bg-transparent border-0  float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>i(!1),children:e("svg",{className:"w-6 h-6",fill:"none",stroke:"#808080",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e("div",{className:"mt-5 md:mt-0 md:col-span-4",children:s("div",{className:"grid grid-cols-9 gap-9 px-4 py-4",children:[s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"customer",className:"block text-xs font-medium uppercase text-gray-500",children:["Customer",e("span",{className:"text-red-600",children:"*"})]}),e("input",{onChange:n,type:"text",name:"customer",id:"customer",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:a==null?void 0:a.customer})]}),s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"pic",className:"block text-xs font-medium uppercase text-gray-500",children:["PIC",e("span",{className:"text-red-600",children:"*"})]}),e("input",{onChange:n,type:"text",name:"pic",id:"pic",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:a==null?void 0:a.pic})]}),s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"contact",className:"block text-xs font-medium uppercase text-gray-500",children:["Contact",e("span",{className:"text-red-600",children:"*"})]}),e("input",{onChange:n,type:"text",name:"contact",id:"contact",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:a==null?void 0:a.contact})]}),s("div",{className:"col-span-9 sm:col-span-6",children:[e("label",{for:"alamat-customer",className:"block text-xs font-medium uppercase text-gray-500",children:"Alamat Customer"}),e("textarea",{onChange:n,type:"text",name:"address",id:"address",autoComplete:"address",rows:"4",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Alamat lengkap customer",value:a==null?void 0:a.address})]}),s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"status",className:"block text-xs font-medium uppercase text-gray-500",children:["Status",e("span",{className:"text-red-600",children:"*"})]}),s("select",{onChange:n,id:"status",name:"status",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm",value:a==null?void 0:a.status,children:[e("option",{value:"",children:"---Pilih Status---"}),e("option",{value:"active",children:"Active"}),e("option",{value:"inactive",children:"Inactive"})]})]}),s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"sales",className:"block text-xs font-medium uppercase text-gray-500",children:["Sales",e("span",{className:"text-red-600",children:"*"})]}),e(A,{onChange:n,value:a==null?void 0:a.salesUser})]}),s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"coordinate",className:"block text-xs font-medium uppercase text-gray-500",children:["Coordinate",e("span",{className:"text-red-600",children:"*"})]}),e("input",{onChange:n,type:"text",name:"coordinate",id:"coordinate",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:a==null?void 0:a.coordinate})]})]})}),s("div",{className:"flex items-center justify-end p-3 border-t border-solid border-slate-200 rounded-b",children:[e("button",{className:"bg-emerald-500 text-white active:bg-emerald-600 hover:bg-emerald-700 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"submit",children:"Edit"}),e("button",{className:"text-gray-500 background-transparent hover:bg-gray-200 font-bold uppercase px-6 py-3 rounded text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:()=>i(!1),children:"Cancel"})]})]})})}),e("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})}):null]})}function oe(){var d,n;const[r,t]=x.exports.useState(!1),l=k(),[i,a]=x.exports.useState({customer:"",pic:"",contact:"",address:"",sales:"",status:"",coordinate:""}),o=b=>{const{name:m,value:f}=b.target;a(v=>g(h({},v),{[m]:f}))},u=b=>{b.preventDefault(),l(_(i)).then(()=>{window.alert("Customer created successfully")}).catch(m=>{window.alert(m)}),t(!1)};return s(w,{children:[I.create_customer.allowedRoles.includes((n=(d=L)==null?void 0:d.user)==null?void 0:n.role)&&e("button",{type:"button",onClick:()=>t(!0),className:"inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out","data-bs-toggle":"modal","data-bs-target":"#exampleModalLg",children:"Tambah Customer"}),r?e(w,{children:s("form",{onSubmit:u,children:[e("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:e("div",{className:"relative w-auto my-6 mx-auto max-w-4xl",children:s("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[s("div",{className:"flex items-start justify-between p-4 border-b border-solid border-slate-200 rounded-t",children:[e("h3",{className:"text-xl font-semibold uppercase",children:"Tambah Customer"}),e("button",{className:"p-1 ml-auto bg-transparent border-0  float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>t(!1),children:e("svg",{className:"w-6 h-6",fill:"none",stroke:"#808080",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e("div",{className:"mt-5 md:mt-0 md:col-span-4",children:s("div",{className:"grid grid-cols-9 gap-9 px-4 py-4",children:[s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"customer",className:"block text-xs font-medium uppercase text-gray-500",children:["Customer",e("span",{className:"text-red-600",children:"*"})]}),e("input",{onChange:o,type:"text",name:"customer",id:"customer",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"pic",className:"block text-xs font-medium uppercase text-gray-500",children:["PIC",e("span",{className:"text-red-600",children:"*"})]}),e("input",{onChange:o,type:"text",name:"pic",id:"pic",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"contact",className:"block text-xs font-medium uppercase text-gray-500",children:["Contact",e("span",{className:"text-red-600",children:"*"})]}),e("input",{onChange:o,type:"text",name:"contact",id:"contact",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),s("div",{className:"col-span-9 sm:col-span-6",children:[e("label",{for:"address",className:"block text-xs font-medium uppercase text-gray-500",children:"Alamat Customer"}),e("textarea",{onChange:o,type:"text",name:"address",id:"address",rows:"4",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Alamat lengkap customer"})]}),s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"status",className:"block text-xs font-medium uppercase text-gray-500",children:["Status",e("span",{className:"text-red-600",children:"*"})]}),s("select",{onChange:o,id:"status",name:"status",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm",children:[e("option",{value:"",children:"--Pilih Status--"}),e("option",{value:"active",children:"Active"}),e("option",{value:"inactive",children:"Inactive"})]})]}),s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"sales",className:"block text-xs font-medium uppercase text-gray-500",children:["Sales",e("span",{className:"text-red-600",children:"*"})]}),e(A,{onChange:o})]}),s("div",{className:"col-span-9 sm:col-span-3",children:[s("label",{for:"coordinate",className:"block text-xs font-medium uppercase text-gray-500",children:["Coordinate",e("span",{className:"text-red-600",children:"*"})]}),e("input",{onChange:o,type:"text",name:"coordinate",id:"coordinate",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]})]})}),s("div",{className:"flex items-center justify-end p-3 border-t border-solid border-slate-200 rounded-b",children:[e("button",{className:"bg-emerald-500 text-white active:bg-emerald-600 hover:bg-emerald-700 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"submit",children:"Submit"}),e("button",{className:"text-gray-500 background-transparent hover:bg-gray-200 font-bold uppercase px-6 py-3 rounded text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:()=>t(!1),children:"Close"})]})]})})}),e("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})}):null]})}function re({preGlobalFilteredRows:r,globalFilter:t,setGlobalFilter:l}){const i=r.length,[a,o]=x.exports.useState(t),u=N.exports.useAsyncDebounce(d=>{l(d||void 0)},200);return s("label",{className:"flex gap-x-2 items-baseline",children:[e("span",{className:"text-gray-700",children:"Search: "}),e("input",{type:"text",className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:a||"",onChange:d=>{o(d.target.value),u(d.target.value)},placeholder:`${i} records...`})]})}function le({value:r}){const t=r?r.toLowerCase():"unknown";return e("span",{className:ae("px-3 py-1 uppercase leading-wide font-bold text-xs rounded-full shadow-sm",t.startsWith("active")?"bg-green-100 text-green-800":null,t.startsWith("inactive")?"bg-red-100 text-red-800":null),children:t})}function ne({columns:r,data:t}){const{getTableProps:l,getTableBodyProps:i,headerGroups:a,prepareRow:o,page:u,canPreviousPage:d,canNextPage:n,pageOptions:b,pageCount:m,gotoPage:f,nextPage:v,previousPage:y,setPageSize:D,state:P,preGlobalFilteredRows:R,setGlobalFilter:B}=N.exports.useTable({columns:r,data:t},N.exports.useFilters,N.exports.useGlobalFilter,N.exports.useSortBy,N.exports.usePagination);return e(w,{children:e("div",{className:"shadow overflow-hidden sm:rounded-md",children:s("div",{className:"px-4 py-5 bg-white sm:p-6",children:[e("header",{className:"px-0 mt-0 mb-4",children:e("h2",{className:"font-semibold text-slate-800 uppercase",children:"Customer List"})}),s("div",{className:"sm:flex sm:gap-x-2 py-2",children:[e(re,{preGlobalFilteredRows:R,globalFilter:P.globalFilter,setGlobalFilter:B}),a.map(c=>c.headers.map(p=>p.Filter?e("div",{className:"mt-2 sm:mt-0",children:p.render("Filter")},p.id):null)),e("div",{className:"flex px-4",children:e(oe,{})})]}),e("div",{className:"mt-4 flex flex-col",children:e("div",{className:"-my-2 overflow-x-auto -mx-4 sm:-mx-6 lg:-mx-8",children:e("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:e("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:s("table",g(h({},l()),{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:a.map(c=>e("tr",g(h({},c.getHeaderGroupProps()),{children:c.headers.map(p=>e("th",g(h({scope:"col",className:"group px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},p.getHeaderProps(p.getSortByToggleProps())),{children:s("div",{className:"flex items-center justify-between",children:[p.render("Header"),e("span",{children:p.isSorted?p.isSortedDesc?e(K,{className:"w-4 h-4 text-gray-400"}):e(Q,{className:"w-4 h-4 text-gray-400"}):e(X,{className:"w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100"})})]})})))})))}),e("tbody",g(h({},i()),{className:"bg-white divide-y divide-gray-200",children:u.map((c,p)=>(o(c),e("tr",g(h({},c.getRowProps()),{children:c.cells.map(C=>e("td",g(h({},C.getCellProps()),{className:"px-6 py-4 whitespace-nowrap",role:"cell",children:C.column.Cell.name==="defaultRenderer"?e("div",{className:"text-sm text-gray-500",children:C.render("Cell")}):C.render("Cell")})))}))))}))]}))})})})}),s("div",{className:"py-3 flex items-center justify-between",children:[s("div",{className:"flex-1 flex justify-between sm:hidden",children:[e(H,{onClick:()=>y(),disabled:!d,children:"Previous"}),e(H,{onClick:()=>v(),disabled:!n,children:"Next"})]}),s("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s("div",{className:"flex gap-x-2 items-baseline",children:[s("span",{className:"text-sm text-gray-700",children:["Page ",e("span",{className:"font-medium",children:P.pageIndex+1})," of"," ",e("span",{className:"font-medium",children:b.length})]}),s("label",{children:[e("span",{className:"sr-only",children:"Items Per Page"}),e("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:P.pageSize,onChange:c=>{D(Number(c.target.value))},children:[5,10,20].map(c=>s("option",{value:c,children:["Show ",c]},c))})]})]}),e("div",{children:s("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[s(S,{className:"rounded-l-md",onClick:()=>f(0),disabled:!d,children:[e("span",{className:"sr-only",children:"First"}),e(Y,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})]}),s(S,{onClick:()=>y(),disabled:!d,children:[e("span",{className:"sr-only",children:"Previous"}),e(Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})]}),s(S,{onClick:()=>v(),disabled:!n,children:[e("span",{className:"sr-only",children:"Next"}),e(ee,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})]}),s(S,{className:"rounded-r-md",onClick:()=>f(m-1),disabled:!n,children:[e("span",{className:"sr-only",children:"Last"}),e(se,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})]})]})})]})]})]})})})}function fe(){const r=j(a=>a.customers.list),t=k();x.exports.useEffect(()=>{t(V())},[]);const l=a=>{window.confirm("Are you sure you want to remove?")&&t($(a))},i=x.exports.useMemo(()=>[{Header:"ID",accessor:"id"},{Header:"Customer",accessor:"customer"},{Header:"PIC",accessor:"pic"},{Header:"Contact",accessor:"contact"},{Header:"Address",accessor:"address"},{Header:"Sales",accessor:"salesUser.fullName"},{Header:"Coordinate",accessor:"coordinate"},{Header:"Status",accessor:"status",Cell:le},{Header:"Action",Cell:a=>{var o,u,d,n;return s("div",{className:"flex justify-start",children:[I.update_customer.allowedRoles.includes((u=(o=L)==null?void 0:o.user)==null?void 0:u.role)&&e(te,{id:a.row.original.id}),I.delete_customer.allowedRoles.includes((n=(d=L)==null?void 0:d.user)==null?void 0:n.role)&&e("svg",{onClick:()=>l(a.row.original.id),xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-red-400 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})]})}}],[]);return e(ne,{columns:i,data:r})}export{fe as default};
